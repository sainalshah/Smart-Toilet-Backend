/*!
 * Chart.bands.js
 * Version: v0.4.0-rc
 *
 * Copyright 2016 BBC
 * Released under the MIT license
 * https://github.com/BBC/Chart.bands.js/blob/master/LICENSE.md
 */
!function o(e,r,t){function a(l,i){if(!r[l]){if(!e[l]){var s="function"==typeof require&&require;if(!i&&s)return s(l,!0);if(n)return n(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var d=r[l]={exports:{}};e[l][0].call(d.exports,function(o){var r=e[l][1][o];return a(r?r:o)},d,d.exports,o,e,r,t)}return r[l].exports}for(var n="function"==typeof require&&require,l=0;l<t.length;l++)a(t[l]);return a}({1:[function(o,e,r){},{}],2:[function(o,e,r){function t(o,e,r,t){var l=e.getPixelForValue(t.yValue),i=t.bandLine;if("dashed"===i.type)for(var s=r.start;s<r.stop;s+=6)a(o,l,s,s+4,i.stroke,i.colour);else a(o,l,r.start,r.stop,i.stroke,i.colour);void 0!==i.label&&i.label.length>0&&n(o,i,{x:r.start,y:r.top-2*t.bandLine.fontSize})}function a(o,e,r,t,a,n){o.beginPath(),o.moveTo(r,e),o.lineTo(t,e),o.lineWidth=a,o.strokeStyle=n,o.stroke()}function n(o,e,r){if(o.font=d.fontString(e.fontSize,e.fontStyle,e.fontFamily),o.fillStyle=e.colour,o.fillText(e.label,r.x,r.y),"dashed"===e.type)for(var t=10;t<r.x-10;t+=6)a(o,r.y+.5*e.fontSize,t,t+4,e.stroke,e.colour);else a(o,r.y,10,r.x-10,e.stroke,e.colour)}function l(o){return"object"==typeof o.belowThresholdColour&&o.belowThresholdColour.length>0&&"number"==typeof o.yValue}function i(o,e,r,t,a,n){var l=e.getPixelForValue(n),i=o.createLinearGradient(0,r,0,0),s=1-l/r;try{return i.addColorStop(0,a),i.addColorStop(s,a),i.addColorStop(s,t),i.addColorStop(1,t),i}catch(c){return console.warn("ConfigError: Chart.Bands.js had a problem applying one or more colors please check that you have selected valid color strings"),t}}function s(o){return f[o]?void(g=f[o]):(console.warn("Warning: The Chart.Bands.js plugin is not supported with chart type "+o),void(h=!1))}var c,d,f,u,h,g,p;c=o("Chart"),c="function"==typeof c?c:window.Chart,d=c.helpers,h=!0,g="borderColor",baseColor=[],f={bubble:"backgroundColor",line:"borderColor"},u={borderColor:"backgroundColor",backgroundColor:"borderColor"},c.Bands=c.Bands||{},p=c.Bands.defaults={bands:{yValue:!1,bandLine:{stroke:.01,colour:"rgba(0, 0, 0, 1.000)",type:"solid",label:"",fontSize:"12",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontStyle:"normal"},belowThresholdColour:["rgba(0, 255, 0, 1.000)"]}};var b=c.PluginBase.extend({beforeInit:function(o){s(o.config.type);for(var e=0;e<o.chart.config.data.datasets.length;e++)baseColor[e]=o.chart.config.data.datasets[e][g]},afterScaleUpdate:function(o){var e,r,t;if(h!==!1)if(e=o.chart.ctx.canvas,r=d.configMerge(c.Bands.defaults.bands,o.options.bands),l(r))for(var a=0;a<o.chart.config.data.datasets.length;a++)t=i(e.getContext("2d"),o.scales["y-axis-0"],o.chart.height,baseColor[a],r.belowThresholdColour[a],r.yValue),o.chart.config.data.datasets[a][g]=t;else console.warn("ConfigError: The Chart.Bands.js config seems incorrect")},afterDraw:function(o){var e,r;h!==!1&&(e=o.chart.ctx.canvas,r=d.configMerge(c.Bands.defaults.bands,o.options.bands),"number"==typeof r.yValue?t(e.getContext("2d"),o.scales["y-axis-0"],{top:o.chartArea.top,start:o.chartArea.left,stop:o.chartArea.right},r):console.warn("ConfigError: The Chart.Bands.js plugin config requires a yValue"))}});c.pluginService.register(new b)},{Chart:1}]},{},[2]);